{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\n\n// usePermission(resource, action) -> boolean\n// resource: string like 'users', 'divisions', 'attendance'\n// action: 'read'|'create'|'update'|'delete'|'edit'\nexport default function usePermission(resource, action) {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext) || {};\n  const isSuperAdmin = (user === null || user === void 0 ? void 0 : user.role) === 'super_admin';\n  if (isSuperAdmin) return true;\n  if (!user || !user.permissions) return false;\n  const resourcePerms = user.permissions[resource];\n  if (!resourcePerms) return false;\n\n  // Support both `edit` and `update` naming\n  if (action === 'edit') action = 'update';\n  return Boolean(resourcePerms[action]);\n}\n_s(usePermission, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");","map":{"version":3,"names":["useContext","AuthContext","usePermission","resource","action","_s","user","isSuperAdmin","role","permissions","resourcePerms","Boolean"],"sources":["B:/PortAuthProject/TimeTracker_SLPA/frontend/src/hooks/usePermission.js"],"sourcesContent":["import { useContext } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\n// usePermission(resource, action) -> boolean\r\n// resource: string like 'users', 'divisions', 'attendance'\r\n// action: 'read'|'create'|'update'|'delete'|'edit'\r\nexport default function usePermission(resource, action) {\r\n  const { user } = useContext(AuthContext) || {};\r\n  const isSuperAdmin = user?.role === 'super_admin';\r\n  if (isSuperAdmin) return true;\r\n\r\n  if (!user || !user.permissions) return false;\r\n\r\n  const resourcePerms = user.permissions[resource];\r\n  if (!resourcePerms) return false;\r\n\r\n  // Support both `edit` and `update` naming\r\n  if (action === 'edit') action = 'update';\r\n\r\n  return Boolean(resourcePerms[action]);\r\n}\r\n"],"mappings":";AAAA,SAASA,UAAU,QAAQ,OAAO;AAClC,SAASC,WAAW,QAAQ,wBAAwB;;AAEpD;AACA;AACA;AACA,eAAe,SAASC,aAAaA,CAACC,QAAQ,EAAEC,MAAM,EAAE;EAAAC,EAAA;EACtD,MAAM;IAAEC;EAAK,CAAC,GAAGN,UAAU,CAACC,WAAW,CAAC,IAAI,CAAC,CAAC;EAC9C,MAAMM,YAAY,GAAG,CAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,IAAI,MAAK,aAAa;EACjD,IAAID,YAAY,EAAE,OAAO,IAAI;EAE7B,IAAI,CAACD,IAAI,IAAI,CAACA,IAAI,CAACG,WAAW,EAAE,OAAO,KAAK;EAE5C,MAAMC,aAAa,GAAGJ,IAAI,CAACG,WAAW,CAACN,QAAQ,CAAC;EAChD,IAAI,CAACO,aAAa,EAAE,OAAO,KAAK;;EAEhC;EACA,IAAIN,MAAM,KAAK,MAAM,EAAEA,MAAM,GAAG,QAAQ;EAExC,OAAOO,OAAO,CAACD,aAAa,CAACN,MAAM,CAAC,CAAC;AACvC;AAACC,EAAA,CAduBH,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}