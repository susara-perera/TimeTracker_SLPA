{"ast":null,"code":"import React,{useState,useEffect}from'react';import usePermission from'../../hooks/usePermission';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[showAddModal,setShowAddModal]=useState(false);const[editingUser,setEditingUser]=useState(null);const[formData,setFormData]=useState({firstName:'',lastName:'',email:'',employeeId:'',role:'employee',password:'',confirmPassword:'',division:'',section:''});const[divisions,setDivisions]=useState([]);const[sections,setSections]=useState([]);const canViewUsers=usePermission('users','read');const canCreateUser=usePermission('users','create');const canUpdateUser=usePermission('users','update');const canDeleteUser=usePermission('users','delete');// Helper function to get division name by ID\nconst getDivisionName=divisionId=>{const division=divisions.find(div=>(div._id||div.id)===divisionId);return division?division.name:'N/A';};// Helper function to get section name by ID\nconst getSectionName=sectionId=>{const section=sections.find(sec=>(sec._id||sec.id)===sectionId);return section?section.name:'N/A';};useEffect(()=>{// Fetch users and divisions from API\nconst fetchData=async()=>{try{const token=localStorage.getItem('token');// Fetch users from database\ntry{const usersResponse=await fetch('http://localhost:5000/api/users',{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(usersResponse.ok){const usersData=await usersResponse.json();// Map the data to match frontend structure\nconst mappedUsers=usersData.data.map(user=>{var _user$division,_user$section,_user$division2,_user$section2;return{id:user._id,firstName:user.firstName,lastName:user.lastName,email:user.email,role:user.role,employeeId:user.employeeId,status:user.isActive?'active':'inactive',division:((_user$division=user.division)===null||_user$division===void 0?void 0:_user$division._id)||user.division,section:((_user$section=user.section)===null||_user$section===void 0?void 0:_user$section._id)||user.section,divisionName:(_user$division2=user.division)===null||_user$division2===void 0?void 0:_user$division2.name,sectionName:(_user$section2=user.section)===null||_user$section2===void 0?void 0:_user$section2.name};});setUsers(mappedUsers);}else{console.error('Failed to fetch users');setUsers([]);}}catch(userError){console.error('Error fetching users:',userError);setUsers([]);}// Fetch divisions from database\ntry{const divisionsResponse=await fetch('http://localhost:5000/api/divisions',{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(divisionsResponse.ok){const divisionsData=await divisionsResponse.json();setDivisions(divisionsData.data||[]);}else{console.error('Failed to fetch divisions');setDivisions([]);}}catch(divisionError){console.error('Error fetching divisions:',divisionError);setDivisions([]);}// Fetch sections from database\ntry{const sectionsResponse=await fetch('http://localhost:5000/api/sections',{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(sectionsResponse.ok){const sectionsData=await sectionsResponse.json();setSections(sectionsData.data||[]);}else{console.error('Failed to fetch sections');setSections([]);}}catch(sectionError){console.error('Error fetching sections:',sectionError);setSections([]);}setLoading(false);}catch(error){console.error('Error fetching data:',error);setLoading(false);}};fetchData();},[]);const handleAddUser=()=>{setFormData({firstName:'',lastName:'',email:'',employeeId:'',role:'employee',password:'',confirmPassword:'',division:'',section:''});setEditingUser(null);setShowAddModal(true);};const handleEditUser=user=>{setFormData({firstName:user.firstName,lastName:user.lastName,email:user.email,employeeId:user.employeeId,role:user.role,password:'',confirmPassword:'',division:user.division||'',section:user.section||''});setEditingUser(user);setShowAddModal(true);};const handleDeleteUser=async userId=>{if(window.confirm('Are you sure you want to delete this user?')){try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:5000/api/users/${userId}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(response.ok){setUsers(users.filter(user=>user.id!==userId));alert('User deleted successfully!');}else{const error=await response.json();alert(error.message||'Failed to delete user');}}catch(error){console.error('Error deleting user:',error);alert('Error deleting user. Please try again.');}}};const handleSubmit=async e=>{e.preventDefault();// Enforce front-end permission check as a safeguard\nif(!canCreateUser&&!editingUser){alert('You do not have permission to create users.');return;}// Check if passwords match when adding a new user\nif(!editingUser&&formData.password!==formData.confirmPassword){alert('Passwords do not match!');return;}// Validate required fields\nif(!formData.firstName||!formData.lastName||!formData.email||!formData.employeeId||!formData.role){alert('Please fill in all required fields!');return;}if(!editingUser&&!formData.password){alert('Password is required for new users!');return;}try{const token=localStorage.getItem('token');const userData={firstName:formData.firstName,lastName:formData.lastName,email:formData.email,employeeId:formData.employeeId,role:formData.role,division:formData.division||undefined,section:formData.section||undefined};if(!editingUser){userData.password=formData.password;}else if(formData.password){userData.password=formData.password;}let response;if(editingUser){// Update existing user\nresponse=await fetch(`http://localhost:5000/api/users/${editingUser.id}`,{method:'PUT',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(userData)});}else{// Create new user\nresponse=await fetch('http://localhost:5000/api/users',{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(userData)});}if(response.ok){const result=await response.json();if(editingUser){// Update existing user in state\nsetUsers(users.map(user=>user.id===editingUser.id?{...user,firstName:formData.firstName,lastName:formData.lastName,email:formData.email,employeeId:formData.employeeId,role:formData.role,division:formData.division,section:formData.section}:user));}else{// Add new user to state\nconst newUser={id:result.data._id,firstName:formData.firstName,lastName:formData.lastName,email:formData.email,employeeId:formData.employeeId,role:formData.role,status:'active',division:formData.division,section:formData.section};setUsers([...users,newUser]);}setShowAddModal(false);setEditingUser(null);alert(editingUser?'User updated successfully!':'User created successfully!');}else{const error=await response.json();alert(error.message||'Failed to save user');}}catch(error){console.error('Error saving user:',error);alert('Error saving user. Please try again.');}};const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(!canViewUsers){return/*#__PURE__*/_jsxs(\"div\",{className:\"user-management\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-people\"}),\" User Management\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"professional-card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:/*#__PURE__*/_jsx(\"p\",{children:\"You do not have permission to view users. Contact a Super Admin for access.\"})})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"user-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-people\"}),\" User Management\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn-professional btn-primary\",onClick:canCreateUser?handleAddUser:undefined,title:!canCreateUser?'You do not have permission to add users':'Add User',disabled:!canCreateUser,style:{cursor:canCreateUser?'pointer':'not-allowed'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-circle\"}),\" Add User\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"professional-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"professional-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Employee ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Division\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Section\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:user.employeeId})}),/*#__PURE__*/_jsx(\"td\",{children:`${user.firstName} ${user.lastName}`}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`role-badge role-${user.role.replace('_','-')}`,children:user.role.replace('_',' ').toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{children:getDivisionName(user.division)}),/*#__PURE__*/_jsx(\"td\",{children:getSectionName(user.section)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`status-badge status-${user.status}`,children:user.status.toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-professional btn-primary\",onClick:canUpdateUser?()=>handleEditUser(user):undefined,title:!canUpdateUser?'No permission to edit users':'Edit User',disabled:!canUpdateUser,style:{padding:'8px 12px',fontSize:'12px',cursor:canUpdateUser?'pointer':'not-allowed'},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-professional btn-danger\",onClick:canDeleteUser?()=>handleDeleteUser(user.id):undefined,title:!canDeleteUser?'No permission to delete users':'Delete User',disabled:!canDeleteUser,style:{padding:'8px 12px',fontSize:'12px',cursor:canDeleteUser?'pointer':'not-allowed'},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trash\"})})]})})]},user.id))})]})}),users.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No users found. Click \\\"Add User\\\" to create the first user.\"})})]}),showAddModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowAddModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content professional-form\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{borderBottom:'2px solid var(--gray-200)',paddingBottom:'20px',marginBottom:'24px'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:'24px',fontWeight:'700',color:'var(--gray-900)',display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-plus\",style:{color:'var(--primary)'}}),editingUser?'Edit User':'Add New User']}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close btn-professional btn-danger\",onClick:()=>setShowAddModal(false),style:{padding:'8px 12px',fontSize:'16px'},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",className:\"form-input\",value:formData.firstName,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",className:\"form-input\",value:formData.lastName,onChange:handleInputChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-input\",value:formData.email,onChange:handleInputChange,placeholder:\"user@slpa.lk\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Employee ID *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"employeeId\",className:\"form-input\",value:formData.employeeId,onChange:handleInputChange,placeholder:\"e.g., EMP001\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Division *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"division\",className:\"form-select\",value:formData.division,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Division\"}),divisions.map(division=>/*#__PURE__*/_jsxs(\"option\",{value:division._id||division.id,children:[division.name,\" (\",division.code,\")\"]},division._id||division.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Role *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",className:\"form-select\",value:formData.role,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"employee\",children:\"Employee\"}),/*#__PURE__*/_jsx(\"option\",{value:\"administrative_clerk\",children:\"Administrative Clerk\"}),/*#__PURE__*/_jsx(\"option\",{value:\"clerk\",children:\"Clerk\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Administrator\"}),/*#__PURE__*/_jsx(\"option\",{value:\"super_admin\",children:\"Super Admin\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Section\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"section\",className:\"form-select\",value:formData.section,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Section\"}),sections.map(section=>/*#__PURE__*/_jsxs(\"option\",{value:section._id||section.id,children:[section.name,\" (\",section.code,\")\"]},section._id||section.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Password \",!editingUser&&'*']}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-input\",value:formData.password,onChange:handleInputChange,placeholder:editingUser?\"Leave blank to keep current password\":\"Enter password\",required:!editingUser,minLength:\"1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Confirm Password \",!editingUser&&'*']}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",className:\"form-input\",value:formData.confirmPassword,onChange:handleInputChange,placeholder:editingUser?\"Leave blank to keep current password\":\"Confirm password\",required:!editingUser,minLength:\"1\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",style:{borderTop:'2px solid var(--gray-200)',paddingTop:'20px',marginTop:'24px',display:'flex',gap:'12px',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-professional btn-secondary\",onClick:()=>setShowAddModal(false),style:{background:'var(--gray-500)'},children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn-professional btn-success\",disabled:!canCreateUser&&!editingUser,\"aria-disabled\":!canCreateUser&&!editingUser,title:!canCreateUser&&!editingUser?'You do not have permission to add users':'',children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle\"}),editingUser?'Update User':canCreateUser?'Add User':'No permission']})]})]})]})})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","usePermission","jsx","_jsx","jsxs","_jsxs","UserManagement","users","setUsers","loading","setLoading","showAddModal","setShowAddModal","editingUser","setEditingUser","formData","setFormData","firstName","lastName","email","employeeId","role","password","confirmPassword","division","section","divisions","setDivisions","sections","setSections","canViewUsers","canCreateUser","canUpdateUser","canDeleteUser","getDivisionName","divisionId","find","div","_id","id","name","getSectionName","sectionId","sec","fetchData","token","localStorage","getItem","usersResponse","fetch","headers","ok","usersData","json","mappedUsers","data","map","user","_user$division","_user$section","_user$division2","_user$section2","status","isActive","divisionName","sectionName","console","error","userError","divisionsResponse","divisionsData","divisionError","sectionsResponse","sectionsData","sectionError","handleAddUser","handleEditUser","handleDeleteUser","userId","window","confirm","response","method","filter","alert","message","handleSubmit","e","preventDefault","userData","undefined","body","JSON","stringify","result","newUser","handleInputChange","value","target","prev","className","children","style","display","alignItems","gap","onClick","title","disabled","cursor","replace","toUpperCase","padding","fontSize","length","stopPropagation","borderBottom","paddingBottom","marginBottom","fontWeight","color","onSubmit","gridTemplateColumns","type","onChange","required","placeholder","code","minLength","borderTop","paddingTop","marginTop","justifyContent","background"],"sources":["C:/Users/User/Documents/Project/af2/TimeTracker_SLPA/frontend/src/components/dashboard/UserManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport usePermission from '../../hooks/usePermission';\r\n\r\nconst UserManagement = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [editingUser, setEditingUser] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    employeeId: '',\r\n    role: 'employee',\r\n    password: '',\r\n    confirmPassword: '',\r\n    division: '',\r\n    section: ''\r\n  });\r\n  const [divisions, setDivisions] = useState([]);\r\n  const [sections, setSections] = useState([]);\r\n  const canViewUsers = usePermission('users', 'read');\r\n  const canCreateUser = usePermission('users', 'create');\r\n  const canUpdateUser = usePermission('users', 'update');\r\n  const canDeleteUser = usePermission('users', 'delete');\r\n\r\n  // Helper function to get division name by ID\r\n  const getDivisionName = (divisionId) => {\r\n    const division = divisions.find(div => (div._id || div.id) === divisionId);\r\n    return division ? division.name : 'N/A';\r\n  };\r\n\r\n  // Helper function to get section name by ID\r\n  const getSectionName = (sectionId) => {\r\n    const section = sections.find(sec => (sec._id || sec.id) === sectionId);\r\n    return section ? section.name : 'N/A';\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Fetch users and divisions from API\r\n    const fetchData = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        \r\n        // Fetch users from database\r\n        try {\r\n          const usersResponse = await fetch('http://localhost:5000/api/users', {\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          });\r\n          \r\n          if (usersResponse.ok) {\r\n            const usersData = await usersResponse.json();\r\n            // Map the data to match frontend structure\r\n            const mappedUsers = usersData.data.map(user => ({\r\n              id: user._id,\r\n              firstName: user.firstName,\r\n              lastName: user.lastName,\r\n              email: user.email,\r\n              role: user.role,\r\n              employeeId: user.employeeId,\r\n              status: user.isActive ? 'active' : 'inactive',\r\n              division: user.division?._id || user.division,\r\n              section: user.section?._id || user.section,\r\n              divisionName: user.division?.name,\r\n              sectionName: user.section?.name\r\n            }));\r\n            setUsers(mappedUsers);\r\n          } else {\r\n            console.error('Failed to fetch users');\r\n            setUsers([]);\r\n          }\r\n        } catch (userError) {\r\n          console.error('Error fetching users:', userError);\r\n          setUsers([]);\r\n        }\r\n        \r\n        // Fetch divisions from database\r\n        try {\r\n          const divisionsResponse = await fetch('http://localhost:5000/api/divisions', {\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          });\r\n          \r\n          if (divisionsResponse.ok) {\r\n            const divisionsData = await divisionsResponse.json();\r\n            setDivisions(divisionsData.data || []);\r\n          } else {\r\n            console.error('Failed to fetch divisions');\r\n            setDivisions([]);\r\n          }\r\n        } catch (divisionError) {\r\n          console.error('Error fetching divisions:', divisionError);\r\n          setDivisions([]);\r\n        }\r\n\r\n        // Fetch sections from database\r\n        try {\r\n          const sectionsResponse = await fetch('http://localhost:5000/api/sections', {\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          });\r\n          \r\n          if (sectionsResponse.ok) {\r\n            const sectionsData = await sectionsResponse.json();\r\n            setSections(sectionsData.data || []);\r\n          } else {\r\n            console.error('Failed to fetch sections');\r\n            setSections([]);\r\n          }\r\n        } catch (sectionError) {\r\n          console.error('Error fetching sections:', sectionError);\r\n          setSections([]);\r\n        }\r\n        \r\n        setLoading(false);\r\n        \r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleAddUser = () => {\r\n    setFormData({\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      employeeId: '',\r\n      role: 'employee',\r\n      password: '',\r\n      confirmPassword: '',\r\n      division: '',\r\n      section: ''\r\n    });\r\n    setEditingUser(null);\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const handleEditUser = (user) => {\r\n    setFormData({\r\n      firstName: user.firstName,\r\n      lastName: user.lastName,\r\n      email: user.email,\r\n      employeeId: user.employeeId,\r\n      role: user.role,\r\n      password: '',\r\n      confirmPassword: '',\r\n      division: user.division || '',\r\n      section: user.section || ''\r\n    });\r\n    setEditingUser(user);\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    if (window.confirm('Are you sure you want to delete this user?')) {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const response = await fetch(`http://localhost:5000/api/users/${userId}`, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        if (response.ok) {\r\n          setUsers(users.filter(user => user.id !== userId));\r\n          alert('User deleted successfully!');\r\n        } else {\r\n          const error = await response.json();\r\n          alert(error.message || 'Failed to delete user');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error deleting user:', error);\r\n        alert('Error deleting user. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // Enforce front-end permission check as a safeguard\r\n    if (!canCreateUser && !editingUser) {\r\n      alert('You do not have permission to create users.');\r\n      return;\r\n    }\r\n    \r\n    // Check if passwords match when adding a new user\r\n    if (!editingUser && formData.password !== formData.confirmPassword) {\r\n      alert('Passwords do not match!');\r\n      return;\r\n    }\r\n    \r\n    // Validate required fields\r\n    if (!formData.firstName || !formData.lastName || !formData.email || !formData.employeeId || !formData.role) {\r\n      alert('Please fill in all required fields!');\r\n      return;\r\n    }\r\n    \r\n    if (!editingUser && !formData.password) {\r\n      alert('Password is required for new users!');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const userData = {\r\n        firstName: formData.firstName,\r\n        lastName: formData.lastName,\r\n        email: formData.email,\r\n        employeeId: formData.employeeId,\r\n        role: formData.role,\r\n        division: formData.division || undefined,\r\n        section: formData.section || undefined\r\n      };\r\n\r\n      if (!editingUser) {\r\n        userData.password = formData.password;\r\n      } else if (formData.password) {\r\n        userData.password = formData.password;\r\n      }\r\n\r\n      let response;\r\n      if (editingUser) {\r\n        // Update existing user\r\n        response = await fetch(`http://localhost:5000/api/users/${editingUser.id}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(userData)\r\n        });\r\n      } else {\r\n        // Create new user\r\n        response = await fetch('http://localhost:5000/api/users', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(userData)\r\n        });\r\n      }\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        \r\n        if (editingUser) {\r\n          // Update existing user in state\r\n          setUsers(users.map(user => \r\n            user.id === editingUser.id \r\n              ? {\r\n                  ...user,\r\n                  firstName: formData.firstName,\r\n                  lastName: formData.lastName,\r\n                  email: formData.email,\r\n                  employeeId: formData.employeeId,\r\n                  role: formData.role,\r\n                  division: formData.division,\r\n                  section: formData.section\r\n                }\r\n              : user\r\n          ));\r\n        } else {\r\n          // Add new user to state\r\n          const newUser = {\r\n            id: result.data._id,\r\n            firstName: formData.firstName,\r\n            lastName: formData.lastName,\r\n            email: formData.email,\r\n            employeeId: formData.employeeId,\r\n            role: formData.role,\r\n            status: 'active',\r\n            division: formData.division,\r\n            section: formData.section\r\n          };\r\n          setUsers([...users, newUser]);\r\n        }\r\n        \r\n        setShowAddModal(false);\r\n        setEditingUser(null);\r\n        alert(editingUser ? 'User updated successfully!' : 'User created successfully!');\r\n      } else {\r\n        const error = await response.json();\r\n        alert(error.message || 'Failed to save user');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving user:', error);\r\n      alert('Error saving user. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        <div className=\"spinner-border\" role=\"status\">\r\n          <span className=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!canViewUsers) {\r\n    return (\r\n      <div className=\"user-management\">\r\n        <div className=\"section-header\">\r\n          <h2><i className=\"bi bi-people\"></i> User Management</h2>\r\n        </div>\r\n        <div className=\"professional-card\">\r\n          <div className=\"no-data\">\r\n            <p>You do not have permission to view users. Contact a Super Admin for access.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-management\">\r\n      {/* Professional Section Header */}\r\n      <div className=\"section-header\">\r\n        <h2><i className=\"bi bi-people\"></i> User Management</h2>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <button \r\n            className=\"btn-professional btn-primary\"\r\n            onClick={canCreateUser ? handleAddUser : undefined}\r\n            title={!canCreateUser ? 'You do not have permission to add users' : 'Add User'}\r\n            disabled={!canCreateUser}\r\n            style={{ cursor: canCreateUser ? 'pointer' : 'not-allowed' }}\r\n          >\r\n            <i className=\"bi bi-plus-circle\"></i> Add User\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Professional Users Table */}\r\n      <div className=\"professional-card\">\r\n        <div className=\"table-responsive\">\r\n          <table className=\"professional-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Employee ID</th>\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n                <th>Role</th>\r\n                <th>Division</th>\r\n                <th>Section</th>\r\n                <th>Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {users.map(user => (\r\n                <tr key={user.id}>\r\n                  <td><strong>{user.employeeId}</strong></td>\r\n                  <td>{`${user.firstName} ${user.lastName}`}</td>\r\n                  <td>{user.email}</td>\r\n                  <td>\r\n                    <span className={`role-badge role-${user.role.replace('_', '-')}`}>\r\n                      {user.role.replace('_', ' ').toUpperCase()}\r\n                    </span>\r\n                  </td>\r\n                  <td>{getDivisionName(user.division)}</td>\r\n                  <td>{getSectionName(user.section)}</td>\r\n                  <td>\r\n                    <span className={`status-badge status-${user.status}`}>\r\n                      {user.status.toUpperCase()}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    <div style={{ display: 'flex', gap: '8px' }}>\r\n                      <button \r\n                        className=\"btn-professional btn-primary\"\r\n                        onClick={canUpdateUser ? () => handleEditUser(user) : undefined}\r\n                        title={!canUpdateUser ? 'No permission to edit users' : 'Edit User'}\r\n                        disabled={!canUpdateUser}\r\n                        style={{ padding: '8px 12px', fontSize: '12px', cursor: canUpdateUser ? 'pointer' : 'not-allowed' }}\r\n                      >\r\n                        <i className=\"bi bi-pencil\"></i>\r\n                      </button>\r\n                      <button \r\n                        className=\"btn-professional btn-danger\"\r\n                        onClick={canDeleteUser ? () => handleDeleteUser(user.id) : undefined}\r\n                        title={!canDeleteUser ? 'No permission to delete users' : 'Delete User'}\r\n                        disabled={!canDeleteUser}\r\n                        style={{ padding: '8px 12px', fontSize: '12px', cursor: canDeleteUser ? 'pointer' : 'not-allowed' }}\r\n                      >\r\n                        <i className=\"bi bi-trash\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {users.length === 0 && (\r\n          <div className=\"no-data\">\r\n            <p>No users found. Click \"Add User\" to create the first user.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Professional Add/Edit User Modal */}\r\n      {showAddModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowAddModal(false)}>\r\n          <div className=\"modal-content professional-form\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\" style={{ borderBottom: '2px solid var(--gray-200)', paddingBottom: '20px', marginBottom: '24px' }}>\r\n              <h3 style={{ fontSize: '24px', fontWeight: '700', color: 'var(--gray-900)', display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                <i className=\"bi bi-person-plus\" style={{ color: 'var(--primary)' }}></i>\r\n                {editingUser ? 'Edit User' : 'Add New User'}\r\n              </h3>\r\n              <button \r\n                className=\"modal-close btn-professional btn-danger\"\r\n                onClick={() => setShowAddModal(false)}\r\n                style={{ padding: '8px 12px', fontSize: '16px' }}\r\n              >\r\n                <i className=\"bi bi-x\"></i>\r\n              </button>\r\n            </div>\r\n            \r\n            <form onSubmit={handleSubmit} className=\"modal-body\">\r\n              <div className=\"form-row\" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">First Name *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"firstName\"\r\n                    className=\"form-input\"\r\n                    value={formData.firstName}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Last Name *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"lastName\"\r\n                    className=\"form-input\"\r\n                    value={formData.lastName}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-row\" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Email *</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    className=\"form-input\"\r\n                    value={formData.email}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"user@slpa.lk\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Employee ID *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"employeeId\"\r\n                    className=\"form-input\"\r\n                    value={formData.employeeId}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"e.g., EMP001\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-row\" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Division *</label>\r\n                  <select\r\n                    name=\"division\"\r\n                    className=\"form-select\"\r\n                    value={formData.division}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select Division</option>\r\n                    {divisions.map(division => (\r\n                      <option key={division._id || division.id} value={division._id || division.id}>\r\n                        {division.name} ({division.code})\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Role *</label>\r\n                  <select\r\n                    name=\"role\"\r\n                    className=\"form-select\"\r\n                    value={formData.role}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                  >\r\n                    <option value=\"employee\">Employee</option>\r\n                    <option value=\"administrative_clerk\">Administrative Clerk</option>\r\n                    <option value=\"clerk\">Clerk</option>\r\n                    <option value=\"admin\">Administrator</option>\r\n                    <option value=\"super_admin\">Super Admin</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Section</label>\r\n                <select\r\n                  name=\"section\"\r\n                  className=\"form-select\"\r\n                  value={formData.section}\r\n                  onChange={handleInputChange}\r\n                >\r\n                  <option value=\"\">Select Section</option>\r\n                  {sections.map(section => (\r\n                    <option key={section._id || section.id} value={section._id || section.id}>\r\n                      {section.name} ({section.code})\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"form-row\" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Password {!editingUser && '*'}</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    className=\"form-input\"\r\n                    value={formData.password}\r\n                    onChange={handleInputChange}\r\n                    placeholder={editingUser ? \"Leave blank to keep current password\" : \"Enter password\"}\r\n                    required={!editingUser}\r\n                    minLength=\"1\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Confirm Password {!editingUser && '*'}</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    name=\"confirmPassword\"\r\n                    className=\"form-input\"\r\n                    value={formData.confirmPassword}\r\n                    onChange={handleInputChange}\r\n                    placeholder={editingUser ? \"Leave blank to keep current password\" : \"Confirm password\"}\r\n                    required={!editingUser}\r\n                    minLength=\"1\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"modal-footer\" style={{ borderTop: '2px solid var(--gray-200)', paddingTop: '20px', marginTop: '24px', display: 'flex', gap: '12px', justifyContent: 'flex-end' }}>\r\n                <button \r\n                  type=\"button\"\r\n                  className=\"btn-professional btn-secondary\"\r\n                  onClick={() => setShowAddModal(false)}\r\n                  style={{ background: 'var(--gray-500)' }}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button \r\n                  type=\"submit\"\r\n                  className=\"btn-professional btn-success\"\r\n                  disabled={!canCreateUser && !editingUser}\r\n                  aria-disabled={!canCreateUser && !editingUser}\r\n                  title={!canCreateUser && !editingUser ? 'You do not have permission to add users' : ''}\r\n                >\r\n                  <i className=\"bi bi-check-circle\"></i>\r\n                  {editingUser ? 'Update User' : (canCreateUser ? 'Add User' : 'No permission')}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}